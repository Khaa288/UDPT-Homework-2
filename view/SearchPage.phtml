<script type="text/javascript" language="javascript">
    var xmlHttp;
    function CreateXMLHttpRequest() {
        if (window.XMLHttpRequest) {
            // code for IE7+, Firefox, Chrome, Opera, Safari
            return new XMLHttpRequest()
        } else if (window.ActiveXObject) {
            // code for IE6, IE5
            return new ActiveXObject("Microsoft.XMLHTTP")
        }
    }

    function searchPapers() {
        const searchValue = document.getElementById('search').value;
        const searchByValue = document.getElementById('searchBy').value;

        xmlHttp = CreateXMLHttpRequest();
        xmlHttp.onreadystatechange = showResult;

        xmlHttp.open('GET', `index.php?action=ajax-search&value=${searchValue}&searchBy=${searchByValue}`, true);
        xmlHttp.send(null);
    }

    function showResult()
	{
		if(xmlHttp.readyState == 4 && xmlHttp.status == 200)
		{
			var result = xmlHttp.responseText;
            document.getElementById("papersTable").innerHTML = result;
		}
	}
</script>

<div class="search-container">
    <div class="search-header">
        <h2>Search Papers</h2>
        <div class="search-filters">
            <div class="search-form-group">
                <label for="searchBy">Search by:</label>
                <select id="searchBy">
                    <option value="title">Title</option>
                    <option value="author_string_list">Authors</option>
                    <option value="name">Conferences</option>
                    <option value="topic_name">Topic</option>
                </select>
            </div>
        </div>
    </div>
    <form>
        <div class="search-form-group">
            <label for="search">Search:</label>
            <input type="text" id="search" placeholder="Enter search term" onkeyup="searchPapers()">
        </div>
        <button type="button" class="search-btn" onclick="searchPapers()">Search</button>
    </form>

    <table id="papersTable" class="search-table">
        <thead>
            <tr>
                <th>Paper ID</th>
                <th>Title</th>
                <th>Authors</th>
                <th>Abstract</th>
                <th>Conference ID</th>
                <th>Topic ID</th>
                <th>User ID</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>Advancements in Artificial Intelligence</td>
                <td>John Smith, Jane Doe</td>
                <td>An in-depth study on recent advancements in AI.</td>
                <td>1</td>
                <td>1</td>
                <td>1</td>
            </tr>
            <tr>
                <td>2</td>
                <td>Data Science Applications in Healthcare</td>
                <td>Michael Brown, Emily Davis, David Harris</td>
                <td>Exploring the impact of data science in healthcare.</td>
                <td>2</td>
                <td>2</td>
                <td>3</td>
            </tr>
            <tr>
                <td>3</td>
                <td>Machine Learning Algorithms for Big Data</td>
                <td>Sarah Martin, James Lee</td>
                <td>A comprehensive review of ML algorithms for big data.</td>
                <td>3</td>
                <td>3</td>
                <td>6</td>
            </tr>
        </tbody>
    </table>
</div>
